## 执行上下文与作用域

执行上下文是 JS 中的核心概念,执行上下文决定了当前环境下能够访问哪些变量与函数,JS 中执行上下文分为如下三种:

- 全局执行上下文:只有一个,浏览器中的全局对象就是 window 对象,this 指向这个全局对象。
- 函数执行上下文:存在无数个,只有在函数被调用的时候才会被创建,每次调用函数都会创建一个新的执行上下文。每当调用函数时 JS 引擎都会为该函数创建一个新的函数执行上下文,并将该函数的执行上下文推到一个执行下文栈中,函数执行完毕后,执行上下文栈会弹出该函数上下文,将控制权返回给之前的执行上下文。
- eval 函数执行上下文:指的是运行在 eval 函数中的代码。

执行上下文的创建分为创建阶段和执行阶段,执行上下文创建阶段流程如下:

- 确定 this 的值,也被称为 This Binding。不同执行上下文 this 的指向也不同,在全局执行上下文件中,浏览器环境 this 指向 window 对象,Node 环境指向该文件的 module 对象。在函数执行上下中,this 的指向取决于函数的调用方式,函数的调用方式分为:默认绑定、隐式绑定、显式绑定（硬绑定）、new 绑定、箭头函数。
- 创建 LexicalEnvironment(词法环境)。
- 创建 VariableEnvironment(变量环境)。
